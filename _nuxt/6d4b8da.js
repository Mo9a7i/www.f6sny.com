(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{352:function(t,e,n){"use strict";n.r(e);n(2),n(3);var o={props:{joke:{type:Object,default:null}},data:function(){return{votes_up:0,votes_down:0}},mounted:function(){var t=this;this.joke.votes&&this.joke.votes.forEach((function(element){"up"==element.value&&t.votes_up++,"down"==element.value&&t.votes_down++}))}},r=n(21),component=Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("article",{staticClass:"p-md-3 p-1 mb-2",attrs:{id:t.joke.id}},[n("b-row",[n("b-col",{staticClass:"pl-0",attrs:{cols:"1"}},[t.joke.author.display_picture?n("b-avatar",{attrs:{src:t.joke.author.display_picture?t.joke.author.display_picture:"",size:""}}):n("b-avatar",{attrs:{size:""}})],1),t._v(" "),n("b-col",{attrs:{cols:"11"}},[n("header",{staticClass:"mb-2"},[n("p",{staticClass:"p-0 m-0 small text-muted"},[n("time",{staticClass:" pl-2",attrs:{datetime:t.joke.updated_at,title:t.joke.updated_at}},[t._v(t._s(t.$moment(t.joke.updated_at).fromNow()))]),t._v(" "),n("strong",[t._v("بواسطة "),t.joke.author?n("a",{attrs:{href:"/u/"+t.joke.author.username}},[t._v(t._s(t.joke.author.username)+" ")]):n("a",{attrs:{href:"#"}},[t._v("مجهول")])])])]),t._v(" "),n("section",{},[n("p",{staticClass:"p-0 m-0",domProps:{innerHTML:t._s(t.joke.content)}}),t._v(" "),n("footer",{staticClass:"mb-3"},[t.joke.tags.length?n("ul",{staticClass:"list-inline p-0 m-0 small"},t._l(t.joke.tags,(function(e){return n("li",{key:e.id,staticClass:"list-inline-item"},[n("NuxtLink",{attrs:{to:"/t/"+e.slug}},[t._v(t._s("#"+e.title))])],1)})),0):t._e()])]),t._v(" "),n("footer",{},[n("ul",{staticClass:"list-inline p-0 m-0 col-12 text-muted small text-left"},[n("li",{staticClass:"list-inline-item",attrs:{title:"صفحة النكتة"}},[n("b-link",{staticClass:"text-muted",attrs:{to:"/j/"+t.joke.slug}},[n("i",{staticClass:"fas fa-link"})])],1),t._v(" "),n("li",{staticClass:"list-inline-item",attrs:{title:"خمس تعليقات"}},[n("i",{staticClass:"fas fa-comment"})]),t._v(" "),n("li",{staticClass:"list-inline-item",attrs:{title:t.votes_up+" تصويتات للأعلى"}},[n("i",{staticClass:"fas fa-thumbs-up"})]),t._v(" "),n("li",{staticClass:"list-inline-item",attrs:{title:t.votes_down+" تصويتات للأسفل"}},[n("i",{staticClass:"fas fa-thumbs-down"})]),t._v(" "),n("li",{staticClass:"list-inline-item",attrs:{title:"تبليغ"}},[n("i",{staticClass:"fas fa-flag-alt"})])])])])],1)],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Header:n(142).default,Footer:n(143).default})},353:function(t,e,n){"use strict";n.r(e);n(4),n(1),n(2),n(6),n(7),n(5),n(22),n(3),n(35),n(44);var o=n(12),r=n(0),c=n(32);function m(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function l(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):m(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var _={props:{joke:{type:Object,default:null}},data:function(){return{new_comment:"",success:null,error:null,comment_author_name:"",comment_author_email:"",comment_text_area_characters_count:0}},computed:l(l({},Object(c.b)(["isAuthenticated","loggedInUser"])),{},{comment_textarea_counter:function(){return this.comment_text_area_characters_count=this.new_comment.length,this.new_comment.length}}),methods:{submit_comment:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={content:t.new_comment,related:[{refId:t.joke.id,ref:"jokes",field:"comments"}]},t.isAuthenticated?n.authorUser=loggedInUser.id:(n.authorName=t.comment_author_name,n.authorEmail=t.comment_author_email),e.next=5,t.$f6snyApi.postComment(n,t.joke.id);case 5:return e.sent,t.success="تم إستلام تعليقك بنجاح",t.$store.dispatch("updateCounters"),t.get_comments(),t.new_comment="",e.next=12,new Promise((function(t){return setTimeout(t,1500)}));case 12:t.success=null,e.next=21;break;case 15:return e.prev=15,e.t0=e.catch(0),t.error=e.t0.response.data.message,e.next=20,new Promise((function(t){return setTimeout(t,3e3)}));case 20:t.error=null;case 21:case"end":return e.stop()}}),e,null,[[0,15]])})))()}}},d=n(21),component=Object(d.a)(_,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"comments-form"},[t.success?n("Notification",{attrs:{type:"success",message:t.success}}):t._e(),t._v(" "),t.error?n("Notification",{attrs:{type:"danger",message:t.error}}):t._e(),t._v(" "),n("div",{staticClass:"user-info text-left mb-1"},[t.isAuthenticated?n("div",[n("small",[t._v("سيتم نشر التعليق بإسم: "),t.isAuthenticated?n("mark",[t._v(t._s(t.loggedInUser.username))]):t._e()])]):n("div",[n("small",[t._v("\n                التعليقات مسموحة للزوار، الإسم والبريد الإلكتروني مطلوبين للتعليق\n            ")])])]),t._v(" "),n("b-form-group",{attrs:{id:"comment_field"}},[n("b-form-textarea",{attrs:{id:"new_comment_box",rows:"2",placeholder:"اكتب تعليقك","no-resize":""},model:{value:t.new_comment,callback:function(e){t.new_comment=e},expression:"new_comment"}})],1),t._v(" "),t.comment_textarea_counter?n("b-form-group",{attrs:{id:"comment_button"}},[n("b-row",[n("b-col",[n("b-form-group",[n("b-form-input",{attrs:{size:"sm",type:"text",name:"commenter_name",id:"commenter_name",placeholder:"الإسم"},model:{value:t.comment_author_name,callback:function(e){t.comment_author_name=e},expression:"comment_author_name"}})],1)],1),t._v(" "),n("b-col",[n("b-form-group",[n("b-form-input",{attrs:{size:"sm",type:"email",name:"commenter_email",id:"commenter_email",placeholder:"البريد الإلكتروني"},model:{value:t.comment_author_email,callback:function(e){t.comment_author_email=e},expression:"comment_author_email"}})],1)],1)],1),t._v(" "),n("b-row",[n("b-col",[n("b-form-group",[n("b-button",{staticClass:"btn-block",attrs:{type:"submit",id:"comment_button",name:"comment",variant:"success",size:"sm"},on:{click:function(e){return t.submit_comment()}}},[t._v("إرسال")])],1)],1)],1)],1):t._e()],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Notification:n(144).default})},354:function(t,e,n){"use strict";n.r(e);var o={props:{comment:{type:Object,default:null}}},r=n(21),component=Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"comment comment-id-5 p-3 rounded",attrs:{id:"comment-"+t.comment.id}},[n("b-row",[n("b-col",{staticClass:"text-center",attrs:{cols:"auto"}},[n("b-avatar",{attrs:{size:"sm",square:""}})],1),t._v(" "),n("b-col",[n("header",{staticClass:"mb-3"},[n("time",{staticClass:" pl-2",attrs:{datetime:t.comment.updated_at,title:t.comment.updated_at}},[t._v(t._s(t.$moment(t.comment.updated_at).fromNow()))]),t._v(" "),n("strong",[t._v("بواسطة \n                      "),t.comment.authorUser?n("b-link",{attrs:{to:"/u/"+t.comment.authorUser.username}},[t._v(t._s(t.comment.authorUser.username))]):n("b-link",{attrs:{title:""+t.comment.authorEmail}},[t._v(t._s(t.comment.authorName))])],1)]),t._v(" "),n("div",{staticClass:"comment-text",domProps:{innerHTML:t._s(t.comment.content)}}),t._v(" "),n("footer",{staticClass:"text-left text-muted small"})])],1)],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Header:n(142).default,Footer:n(143).default})},359:function(t,e,n){"use strict";n.r(e);n(44);var o=n(12),r={data:function(){return{slug:this.$route.params.slug,joke:null,comments:[]}},fetch:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get_joke();case 2:return e.next=4,t.get_comments();case 4:case"end":return e.stop()}}),e)})))()},methods:{get_joke:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$f6snyApi.getJokeBySlug(t.slug);case 2:data=e.sent,t.joke=data[0],console.log(t.joke);case 5:case"end":return e.stop()}}),e)})))()},get_comments:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$f6snyApi.getComments(t.joke.id);case 2:n=e.sent,t.comments=n.sort((function(a,b){return a.id>b.id?-1:b.id>a.id?1:0})),console.log(n);case 5:case"end":return e.stop()}}),e)})))()}}},c=n(21),component=Object(c.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.joke?n("section",{staticClass:"jokes"},[n("joke-block",{key:t.joke.id,attrs:{joke:t.joke}})],1):t.joke=={}?n("section",[n("b-alert",{attrs:{show:"",variant:"danger"}},[t._v("مافيه نكتة كذا عندنا، إذا تعرفها بالله  علمنا عنها..")])],1):n("section",[n("b-alert",{attrs:{variant:"warning",show:""}},[t._v("ماحصلنا النكتة")])],1),t._v(" "),n("section",{attrs:{id:"comments"}},[n("h4",{staticClass:"mt-5"},[t._v(" التعليقات")]),t._v(" "),n("comment-form-block",{attrs:{joke:t.joke}}),t._v(" "),t.comments.length?n("div",{staticClass:"comments-loop"},t._l(t.comments,(function(t){return n("comment-block",{key:t.id,attrs:{comment:t}})})),1):0==t.comments.length?n("div",{staticClass:"comments-loop mb-5"},[n("b-alert",{attrs:{show:"",variant:"danger"}},[t._v("مافيه تعليقات، اكتب اول تعليق..")])],1):n("div",[n("h5",[t._v("جاري سحب التعليقات..")])])],1)])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{JokeBlock:n(352).default,CommentFormBlock:n(353).default,CommentBlock:n(354).default})}}]);